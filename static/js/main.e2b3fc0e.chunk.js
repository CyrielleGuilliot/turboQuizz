(this.webpackJsonpturboquizz=this.webpackJsonpturboquizz||[]).push([[0],{22:function(e,t,s){},23:function(e,t,s){},25:function(e,t,s){},26:function(e,t,s){},27:function(e,t,s){},28:function(e,t,s){},29:function(e,t,s){"use strict";s.r(t);var c=s(0),n=s.n(c),r=s(6),i=s.n(r),a=(s(21),s(22),s(7)),l=s(3),o=(s(23),s(1));var d=()=>{const[e,t]=Object(c.useState)(!1),[s,n]=Object(c.useState)([]),[r,i]=Object(c.useState)({title:"",words:[{term:"",definition:""},{term:"",definition:""}]}),a=Object(l.q)(),{userId:d}=Object(l.s)();Object(c.useEffect)((()=>{fetch(`http://localhost:5000/api/users/${d}/lists`).then((e=>e.json())).then((e=>n(e))).catch((e=>console.error("Erreur lors du chargement des listes",e)))}),[d]);const j=()=>{t(!e)},b=(e,t)=>{const{name:s,value:c}=t.target,n=[...r.words];n[e][s]=c,i({...r,words:n})};return Object(o.jsxs)("div",{className:"lists-container",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"titleHome",children:"Lists :"}),Object(o.jsxs)("button",{className:"add-button",onClick:j,children:[Object(o.jsx)("ion-icon",{name:"add-circle-outline",size:"large"}),"Add list"]})]}),Object(o.jsx)("div",{className:"lists-grid",children:s.map((e=>Object(o.jsxs)("div",{className:"list-card",onClick:()=>{return t=e.id,void a(`/user/${d}/list/${t}`);var t},style:{cursor:"pointer"},children:[Object(o.jsx)("h3",{children:e.title}),Object(o.jsxs)("p",{children:[e.words.length," termes"]})]},e.id)))}),e&&Object(o.jsx)("div",{className:"popup-overlay",children:Object(o.jsxs)("div",{className:"popup-content",children:[Object(o.jsx)("h3",{children:"Create a list"}),Object(o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),fetch(`http://localhost:5000/api/users/${d}/lists`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>e.json())).then((e=>{n([...s,e]),t(!1),i({title:"",words:[{term:"",definition:""},{term:"",definition:""}]})})).catch((e=>console.error("Erreur ajout liste:",e)))},children:[Object(o.jsx)("input",{type:"text",name:"title",placeholder:"Title",value:r.title,onChange:e=>{i({...r,title:e.target.value})},required:!0}),r.words.map(((e,t)=>Object(o.jsxs)("div",{className:"word-card",children:[Object(o.jsx)("input",{type:"text",name:"term",placeholder:"Term",value:e.term,onChange:e=>b(t,e),required:!0}),Object(o.jsx)("input",{type:"text",name:"definition",placeholder:"Definition",value:e.definition,onChange:e=>b(t,e),required:!0})]},t))),Object(o.jsx)("button",{type:"button",onClick:()=>{i({...r,words:[...r.words,{term:"",definition:""}]})},className:"add-word-button",children:Object(o.jsx)("ion-icon",{name:"add-outline"})}),Object(o.jsxs)("div",{className:"popup-buttons",children:[Object(o.jsx)("button",{type:"submit",className:"save-button",children:"Save"}),Object(o.jsx)("button",{type:"button",className:"cancel-button",onClick:j,children:"Cancel"})]})]})]})})]})},j=s(34),b=s(35);s(25);var u=()=>{const{id:e,userId:t}=Object(l.s)(),s=Object(l.q)(),[n,r]=Object(c.useState)(null),[i,a]=Object(c.useState)({});Object(c.useEffect)((()=>{const s=t||localStorage.getItem("userId");s&&fetch(`http://localhost:5000/api/users/${s}/lists`).then((e=>e.json())).then((t=>{const s=t.find((t=>t.id===parseInt(e)));r(s)})).catch((e=>console.error("Erreur de chargement de la liste",e)))}),[e,t]);return n?Object(o.jsxs)("div",{className:"list-container",children:[Object(o.jsx)("button",{className:"back-button",onClick:()=>s(`/user/${t}/home`),children:Object(o.jsx)("i",{className:"bi bi-arrow-left"})}),Object(o.jsx)(j.a,{children:n.words.map(((e,t)=>Object(o.jsx)(j.a.Item,{children:Object(o.jsx)("div",{className:"carousel-item-content",children:Object(o.jsxs)("div",{className:"flip-card "+(i[t]?"flipped":""),onClick:()=>(e=>{a((t=>({...t,[e]:!t[e]})))})(t),children:[Object(o.jsx)("div",{className:"flip-card-front",children:Object(o.jsx)(b.a,{className:"custom-card",children:Object(o.jsx)(b.a.Body,{className:"d-flex justify-content-center align-items-center",children:Object(o.jsx)("h3",{className:"term-text",children:e.term})})})}),Object(o.jsx)("div",{className:"flip-card-back",children:Object(o.jsx)(b.a,{className:"custom-card back",children:Object(o.jsx)(b.a.Body,{className:"d-flex justify-content-center align-items-center",children:Object(o.jsx)("p",{className:"definition-text",children:e.definition})})})})]})})},t)))}),Object(o.jsxs)("div",{className:"button-group",children:[Object(o.jsxs)("button",{className:"cards-button",onClick:()=>s(`/user/${t}/list/${e}/cards`),children:[Object(o.jsx)("i",{className:"bi bi-front"}),"Cards"]}),Object(o.jsxs)("button",{className:"cards-button",onClick:()=>s(`/user/${t}/list/${e}/learn`),children:[Object(o.jsx)("i",{className:"bi bi-graph-up-arrow"}),"Learn"]})]})]}):Object(o.jsx)("p",{children:"Chargement..."})};s(26);var h=()=>{const{id:e}=Object(l.s)(),t=Object(l.q)(),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(0),[a,d]=Object(c.useState)(!1),[j,b]=Object(c.useState)(0),[u,h]=Object(c.useState)(0);if(Object(c.useEffect)((()=>{const t=localStorage.getItem("userId");fetch(`http://localhost:5000/api/users/${t}/lists`).then((e=>e.json())).then((t=>{const s=t.find((t=>t.id===parseInt(e)));n(s)})).catch((e=>console.error("Erreur de chargement de la liste",e)))}),[e]),!s)return Object(o.jsx)("p",{children:"Chargement..."});const m=s.words,O=e=>{r<m.length&&(e&&j<m.length?b(j+1):!e&&u<m.length&&h(u+1),r<m.length-1&&(i(r+1),d(!1)))};return Object(o.jsxs)("div",{className:"card-container",children:[Object(o.jsx)("button",{className:"exit-button",onClick:()=>{const s=localStorage.getItem("userId");t(`/user/${s}/list/${e}`)},children:Object(o.jsx)("i",{className:"bi bi-x-lg"})}),Object(o.jsxs)("div",{className:"progress-counter",children:[r+1,"/",m.length]}),Object(o.jsxs)("div",{className:"score-container",children:[Object(o.jsx)("div",{className:"score-circle incorrect-score",children:Object(o.jsx)("span",{children:u})}),Object(o.jsx)("div",{className:"score-circle correct-score",children:Object(o.jsx)("span",{children:j})})]}),Object(o.jsx)("div",{className:"flip-card "+(a?"flipped":""),onClick:()=>{d(!a)},children:Object(o.jsxs)("div",{className:"flip-card-inner",children:[Object(o.jsx)("div",{className:"flip-card-front",children:Object(o.jsx)("div",{className:"card-content",children:m[r].term})}),Object(o.jsx)("div",{className:"flip-card-back",children:Object(o.jsx)("div",{className:"card-content",children:m[r].definition})})]})}),Object(o.jsxs)("div",{className:"button2-group",children:[Object(o.jsx)("button",{className:"incorrect-button",onClick:()=>O(!1),children:Object(o.jsx)("i",{className:"bi bi-x-lg"})}),Object(o.jsx)("button",{className:"correct-button",onClick:()=>O(!0),children:Object(o.jsx)("i",{className:"bi bi-check-lg"})})]})]})};s(27);var m=()=>{const[e,t]=Object(c.useState)(""),[s,n]=Object(c.useState)(""),[r,i]=Object(c.useState)(""),a=Object(l.q)();return Object(o.jsxs)("div",{className:"login-container",children:[Object(o.jsx)("h2",{children:"Connexion"}),Object(o.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("http://localhost:5000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),c=await t.json();if(c.success){const e=c.userId;localStorage.setItem("userId",e),a(`/user/${e}/home`)}else i("Nom d'utilisateur ou mot de passe incorrect")}catch(c){console.error("Erreur lors de la tentative de connexion :",c),i("Erreur de connexion au serveur")}},className:"login-form",children:[Object(o.jsx)("input",{type:"text",placeholder:"Nom d'utilisateur",value:e,onChange:e=>t(e.target.value),required:!0}),Object(o.jsx)("input",{type:"password",placeholder:"Mot de passe",value:s,onChange:e=>n(e.target.value),required:!0}),Object(o.jsx)("button",{type:"submit",children:"Se connecter"}),r&&Object(o.jsx)("p",{className:"error-message",children:r})]})]})};s(28);var O=()=>{const{id:e}=Object(l.s)(),t=Object(l.q)(),[s,n]=Object(c.useState)(null),[r,i]=Object(c.useState)(0),[a,d]=Object(c.useState)({}),[j,b]=Object(c.useState)(0),[u,h]=Object(c.useState)("QCM"),[m,O]=Object(c.useState)([]),[x,p]=Object(c.useState)(null),[f,g]=Object(c.useState)(null),[N,v]=Object(c.useState)(""),[C,S]=Object(c.useState)(!1),[w,y]=Object(c.useState)(!1);Object(c.useEffect)((()=>{const t=localStorage.getItem("userId");fetch(`http://localhost:5000/api/users/${t}/lists`).then((e=>e.json())).then((t=>{const s=t.find((t=>t.id===parseInt(e)));s&&s.words.length>0?(n(s),I(s.words),k(s.words[0],s.words)):console.error("Liste non trouv\xe9e ou vide.")})).catch((e=>console.error("Erreur de chargement de la liste",e)))}),[e]);const I=e=>{const t={};e.forEach(((e,s)=>{t[s]={qcmCorrect:0,inputCorrect:0,usedRecently:!1}})),d(t)},k=(e,t)=>{if(!e||!t)return;const s=e.definition;let c=t.map((e=>e.definition)).filter((e=>e!==s));c=c.sort((()=>.5-Math.random())).slice(0,3);const n=[s,...c].sort((()=>.5-Math.random()));O(n),p(null),g(null)},$=()=>{if(!s||!s.words||0===Object.keys(a).length)return;const e=Object.entries(a).filter((e=>{let[t,s]=e;return!(e=>e.qcmCorrect>=2&&e.inputCorrect>=2)(s)})).map((e=>{let[t]=e;return t}));if(0===e.length)return n(null),void y(!0);let t=e.filter((e=>!a[e].usedRecently));0===t.length&&(e.forEach((e=>a[e].usedRecently=!1)),t=e);const c=t[Math.floor(Math.random()*t.length)];a[c].usedRecently=!0,d({...a}),b(parseInt(c));a[c].qcmCorrect>=2?h("Input"):(h("QCM"),k(s.words[c],s.words))},q=e=>{if(!s)return;const t=s.words.length,c=Object.values(e).filter((e=>e.qcmCorrect>=2&&e.inputCorrect>=2)).length;console.log("Progress:",c,"/",t);i(c/t*100)};return s||w?w?Object(o.jsxs)("div",{className:"learn-container",children:[Object(o.jsx)("h2",{children:"\ud83c\udf89 F\xe9licitations !"}),Object(o.jsx)("p",{children:"Tu as ma\xeetris\xe9 tous les mots de cette liste."}),Object(o.jsx)("button",{onClick:()=>{const s=localStorage.getItem("userId");t(`/user/${s}/list/${e}`)},children:"Retour \xe0 la liste"})]}):Object(o.jsxs)("div",{className:"learn-container",children:[Object(o.jsx)("button",{className:"exit-button",onClick:()=>{const s=localStorage.getItem("userId");t(`/user/${s}/list/${e}`)},children:Object(o.jsx)("i",{className:"bi bi-x-lg"})}),Object(o.jsx)("h2",{className:"term",children:s.words[j].term}),"QCM"===u?Object(o.jsx)("div",{className:"options-container",children:m.length>0?m.map(((e,t)=>Object(o.jsxs)("button",{className:"option-button "+(x?e===s.words[j].definition?"correct":e===x?"incorrect":"":""),onClick:()=>(e=>{if(!s)return;const t=e===s.words[j].definition;p(e),g(t);const c={...a},n=c[j];t&&(n.qcmCorrect+=1,n.qcmCorrect>=2&&n.inputCorrect>=2&&(n.mastered=!0)),d(c),q(c),setTimeout((()=>{$()}),1e3)})(e),disabled:null!==x,children:[e,x===e&&Object(o.jsx)("i",{className:"bi "+(f?"bi-check-lg":"bi-x")})]},t))):Object(o.jsx)("p",{children:"Chargement des options..."})}):Object(o.jsxs)("div",{className:"input-container",children:[Object(o.jsx)("input",{type:"text",value:N,onChange:e=>v(e.target.value),placeholder:"\xc9crivez la d\xe9finition"}),Object(o.jsx)("button",{onClick:()=>{if(!N.trim())return;S(!0);const e=s.words[j].definition,t=N.trim().toLowerCase()===e.toLowerCase();g(t);const c={...a},n=c[j];t&&(n.inputCorrect+=1,n.qcmCorrect>=2&&n.inputCorrect>=2&&(n.mastered=!0)),d(c),q(c),setTimeout((()=>{$(),v(""),g(null),S(!1)}),1e3)},children:Object(o.jsx)("i",{className:"bi bi-arrow-up-circle-fill"})}),C&&Object(o.jsx)("p",{className:f?"correct-text":"incorrect-text",children:f?"Correct !":`Faux, la bonne r\xe9ponse \xe9tait : ${s.words[j].definition}`})]})]}):Object(o.jsx)("p",{children:"Chargement..."})};var x=function(){return Object(o.jsx)(a.a,{basename:"/turboQuizz",children:Object(o.jsxs)(l.d,{children:[Object(o.jsx)(l.b,{path:"/",element:Object(o.jsx)(l.a,{to:"/login"})}),Object(o.jsx)(l.b,{path:"/login",element:Object(o.jsx)(m,{})}),Object(o.jsx)(l.b,{path:"/user/:userId/home",element:Object(o.jsx)(d,{})}),Object(o.jsx)(l.b,{path:"/user/:userId/list/:id",element:Object(o.jsx)(u,{})}),Object(o.jsx)(l.b,{path:"/user/:userId/list/:id/cards",element:Object(o.jsx)(h,{})}),Object(o.jsx)(l.b,{path:"/user/:userId/list/:id/learn",element:Object(o.jsx)(O,{})})]})})};i.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(x,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.e2b3fc0e.chunk.js.map