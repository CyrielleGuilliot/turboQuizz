(this.webpackJsonpturboquizz=this.webpackJsonpturboquizz||[]).push([[0],{22:function(e,t,s){},23:function(e,t,s){},25:function(e,t,s){},26:function(e,t,s){},27:function(e,t,s){},28:function(e,t,s){},29:function(e,t,s){"use strict";s.r(t);var c=s(0),r=s.n(c),n=s(6),i=s.n(n),a=(s(21),s(22),s(7)),o=s(3),l=(s(23),s(1));var d=()=>{const[e,t]=Object(c.useState)(!1),[s,r]=Object(c.useState)([]),[n,i]=Object(c.useState)({title:"",words:[{term:"",definition:""},{term:"",definition:""}]}),a=Object(o.q)(),{userId:d}=Object(o.s)();Object(c.useEffect)((()=>{fetch(`https://turboquizz.onrender.com/api/users/${d}/lists`).then((e=>e.json())).then((e=>r(e))).catch((e=>console.error("Erreur lors du chargement des listes",e)))}),[d]);const j=()=>{t(!e)},b=(e,t)=>{const{name:s,value:c}=t.target,r=[...n.words];r[e][s]=c,i({...n,words:r})};return Object(l.jsxs)("div",{className:"lists-container",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"titleHome",children:"Lists :"}),Object(l.jsxs)("button",{className:"add-button",onClick:j,children:[Object(l.jsx)("ion-icon",{name:"add-circle-outline",size:"large"}),"Add list"]})]}),Object(l.jsx)("div",{className:"lists-grid",children:s.map((e=>Object(l.jsxs)("div",{className:"list-card",onClick:()=>{return t=e.id,void a(`/user/${d}/list/${t}`);var t},style:{cursor:"pointer"},children:[Object(l.jsx)("h3",{children:e.title}),Object(l.jsxs)("p",{children:[e.words.length," terms"]})]},e.id)))}),e&&Object(l.jsx)("div",{className:"popup-overlay",children:Object(l.jsxs)("div",{className:"popup-content",children:[Object(l.jsx)("h3",{children:"Create a list"}),Object(l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),fetch(`https://turboquizz.onrender.com/api/users/${d}/lists`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{r([...s,e]),t(!1),i({title:"",words:[{term:"",definition:""},{term:"",definition:""}]})})).catch((e=>console.error("Erreur ajout liste:",e)))},children:[Object(l.jsx)("input",{type:"text",name:"title",placeholder:"Title",value:n.title,onChange:e=>{i({...n,title:e.target.value})},required:!0}),n.words.map(((e,t)=>Object(l.jsxs)("div",{className:"word-card",children:[Object(l.jsx)("input",{type:"text",name:"term",placeholder:"Term",value:e.term,onChange:e=>b(t,e),required:!0}),Object(l.jsx)("input",{type:"text",name:"definition",placeholder:"Definition",value:e.definition,onChange:e=>b(t,e),required:!0})]},t))),Object(l.jsx)("button",{type:"button",onClick:()=>{i({...n,words:[...n.words,{term:"",definition:""}]})},className:"add-word-button",children:Object(l.jsx)("ion-icon",{name:"add-outline"})}),Object(l.jsxs)("div",{className:"popup-buttons",children:[Object(l.jsx)("button",{type:"submit",className:"save-button",children:"Save"}),Object(l.jsx)("button",{type:"button",className:"cancel-button",onClick:j,children:"Cancel"})]})]})]})})]})},j=s(33),b=s(34);s(25);var u=()=>{const{id:e,userId:t}=Object(o.s)(),s=Object(o.q)(),[r,n]=Object(c.useState)(null),[i,a]=Object(c.useState)({});Object(c.useEffect)((()=>{const s=t||localStorage.getItem("userId");s&&fetch(`https://turboquizz.onrender.com/api/users/${s}/lists`).then((e=>e.json())).then((t=>{const s=t.find((t=>t.id===parseInt(e)));n(s)})).catch((e=>console.error("Erreur de chargement de la liste",e)))}),[e,t]);return r?Object(l.jsxs)("div",{className:"list-container",children:[Object(l.jsx)("button",{className:"back-button",onClick:()=>s(`/user/${t}/home`),children:Object(l.jsx)("i",{className:"bi bi-arrow-left"})}),Object(l.jsx)(j.a,{children:r.words.map(((e,t)=>Object(l.jsx)(j.a.Item,{children:Object(l.jsx)("div",{className:"carousel-item-content",children:Object(l.jsxs)("div",{className:"flip-card "+(i[t]?"flipped":""),onClick:()=>(e=>{a((t=>({...t,[e]:!t[e]})))})(t),children:[Object(l.jsx)("div",{className:"flip-card-front",children:Object(l.jsx)(b.a,{className:"custom-card",children:Object(l.jsx)(b.a.Body,{className:"d-flex justify-content-center align-items-center",children:Object(l.jsx)("h3",{className:"term-text",children:e.term})})})}),Object(l.jsx)("div",{className:"flip-card-back",children:Object(l.jsx)(b.a,{className:"custom-card back",children:Object(l.jsx)(b.a.Body,{className:"d-flex justify-content-center align-items-center",children:Object(l.jsx)("p",{className:"definition-text",children:e.definition})})})})]})})},t)))}),Object(l.jsxs)("div",{className:"button-group",children:[Object(l.jsxs)("button",{className:"cards-button",onClick:()=>s(`/user/${t}/list/${e}/cards`),children:[Object(l.jsx)("i",{className:"bi bi-front"}),"Cards"]}),Object(l.jsxs)("button",{className:"cards-button",onClick:()=>s(`/user/${t}/list/${e}/learn`),children:[Object(l.jsx)("i",{className:"bi bi-graph-up-arrow"}),"Learn"]})]})]}):Object(l.jsx)("p",{children:"Loading..."})};s(26);var h=()=>{const{id:e}=Object(o.s)(),t=Object(o.q)(),[s,r]=Object(c.useState)(null),[n,i]=Object(c.useState)(0),[a,d]=Object(c.useState)(!1),[j,b]=Object(c.useState)(0),[u,h]=Object(c.useState)(0);if(Object(c.useEffect)((()=>{const t=localStorage.getItem("userId");fetch(`https://turboquizz.onrender.com/api/users/${t}/lists`).then((e=>e.json())).then((t=>{const s=t.find((t=>t.id===parseInt(e)));r(s)})).catch((e=>console.error("Erreur de chargement de la liste",e)))}),[e]),!s)return Object(l.jsx)("p",{children:"Loading..."});const m=s.words,O=e=>{n<m.length&&(e&&j<m.length?b(j+1):!e&&u<m.length&&h(u+1),n<m.length-1&&(i(n+1),d(!1)))};return Object(l.jsxs)("div",{className:"card-container",children:[Object(l.jsx)("button",{className:"exit-button",onClick:()=>{const s=localStorage.getItem("userId");t(`/user/${s}/list/${e}`)},children:Object(l.jsx)("i",{className:"bi bi-x-lg"})}),Object(l.jsxs)("div",{className:"progress-counter",children:[n+1,"/",m.length]}),Object(l.jsxs)("div",{className:"score-container",children:[Object(l.jsx)("div",{className:"score-circle incorrect-score",children:Object(l.jsx)("span",{children:u})}),Object(l.jsx)("div",{className:"score-circle correct-score",children:Object(l.jsx)("span",{children:j})})]}),Object(l.jsx)("div",{className:"flip-card "+(a?"flipped":""),onClick:()=>{d(!a)},children:Object(l.jsxs)("div",{className:"flip-card-inner",children:[Object(l.jsx)("div",{className:"flip-card-front",children:Object(l.jsx)("div",{className:"card-content",children:m[n].term})}),Object(l.jsx)("div",{className:"flip-card-back",children:Object(l.jsx)("div",{className:"card-content",children:m[n].definition})})]})}),Object(l.jsxs)("div",{className:"button2-group",children:[Object(l.jsx)("button",{className:"incorrect-button",onClick:()=>O(!1),children:Object(l.jsx)("i",{className:"bi bi-x-lg"})}),Object(l.jsx)("button",{className:"correct-button",onClick:()=>O(!0),children:Object(l.jsx)("i",{className:"bi bi-check-lg"})})]})]})};s(27);var m=()=>{const[e,t]=Object(c.useState)(""),[s,r]=Object(c.useState)(""),[n,i]=Object(c.useState)(""),a=Object(o.q)();return Object(l.jsxs)("div",{className:"login-container",children:[Object(l.jsx)("h2",{children:"Connexion"}),Object(l.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await fetch("https://turboquizz.onrender.com/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),c=await t.json();if(c.success){const e=c.userId;localStorage.setItem("userId",e),a(`/user/${e}/home`)}else i("Username or password incorrect")}catch(c){console.error("Erreur lors de la tentative de connexion :",c),i("Erreur de connexion au serveur")}},className:"login-form",children:[Object(l.jsx)("input",{type:"text",placeholder:"Username",value:e,onChange:e=>t(e.target.value),required:!0}),Object(l.jsx)("input",{type:"password",placeholder:"Password",value:s,onChange:e=>r(e.target.value),required:!0}),Object(l.jsx)("button",{type:"submit",children:"Log in"}),n&&Object(l.jsx)("p",{className:"error-message",children:n})]})]})};s(28);var O=()=>{const{id:e}=Object(o.s)(),t=Object(o.q)(),[s,r]=Object(c.useState)(null),[n,i]=Object(c.useState)(0),[a,d]=Object(c.useState)({}),[j,b]=Object(c.useState)(0),[u,h]=Object(c.useState)("QCM"),[m,O]=Object(c.useState)([]),[x,p]=Object(c.useState)(null),[f,g]=Object(c.useState)(null),[v,N]=Object(c.useState)(""),[C,w]=Object(c.useState)(!1),[S,y]=Object(c.useState)(!1);Object(c.useEffect)((()=>{const t=localStorage.getItem("userId");fetch(`https://turboquizz.onrender.com/api/users/${t}/lists`).then((e=>e.json())).then((t=>{const s=t.find((t=>t.id===parseInt(e)));s&&s.words.length>0?(r(s),I(s.words),k(s.words[0],s.words)):console.error("Liste non trouv\xe9e ou vide.")})).catch((e=>console.error("Erreur de chargement de la liste",e)))}),[e]);const I=e=>{const t={};e.forEach(((e,s)=>{t[s]={qcmCorrect:0,inputCorrect:0,usedRecently:!1}})),d(t)},k=(e,t)=>{if(!e||!t)return;const s=e.definition;let c=t.map((e=>e.definition)).filter((e=>e!==s));c=c.sort((()=>.5-Math.random())).slice(0,3);const r=[s,...c].sort((()=>.5-Math.random()));O(r),p(null),g(null)},q=()=>{if(!s||!s.words||0===Object.keys(a).length)return;const e=Object.entries(a).filter((e=>{let[t,s]=e;return!(e=>e.qcmCorrect>=2&&e.inputCorrect>=2)(s)})).map((e=>{let[t]=e;return t}));if(0===e.length)return r(null),void y(!0);let t=e.filter((e=>!a[e].usedRecently));0===t.length&&(e.forEach((e=>a[e].usedRecently=!1)),t=e);const c=t[Math.floor(Math.random()*t.length)];a[c].usedRecently=!0,d({...a}),b(parseInt(c));a[c].qcmCorrect>=2?h("Input"):(h("QCM"),k(s.words[c],s.words))},z=e=>{if(!s)return;const t=s.words.length,c=Object.values(e).filter((e=>e.qcmCorrect>=2&&e.inputCorrect>=2)).length;console.log("Progress:",c,"/",t);i(c/t*100)};return s||S?S?Object(l.jsxs)("div",{className:"learn-container",children:[Object(l.jsx)("h2",{children:"\ud83c\udf89 Congrats !"}),Object(l.jsx)("p",{children:"You've mastered all the words on this list."}),Object(l.jsx)("button",{onClick:()=>{const s=localStorage.getItem("userId");t(`/user/${s}/list/${e}`)},children:"Back to the list"})]}):Object(l.jsxs)("div",{className:"learn-container",children:[Object(l.jsx)("button",{className:"exit-button",onClick:()=>{const s=localStorage.getItem("userId");t(`/user/${s}/list/${e}`)},children:Object(l.jsx)("i",{className:"bi bi-x-lg"})}),Object(l.jsx)("h2",{className:"term",children:s.words[j].term}),"QCM"===u?Object(l.jsx)("div",{className:"options-container",children:m.length>0?m.map(((e,t)=>Object(l.jsxs)("button",{className:"option-button "+(x?e===s.words[j].definition?"correct":e===x?"incorrect":"":""),onClick:()=>(e=>{if(!s)return;const t=e===s.words[j].definition;p(e),g(t);const c={...a},r=c[j];t&&(r.qcmCorrect+=1,r.qcmCorrect>=2&&r.inputCorrect>=2&&(r.mastered=!0)),d(c),z(c),setTimeout((()=>{q()}),1e3)})(e),disabled:null!==x,children:[e,x===e&&Object(l.jsx)("i",{className:"bi "+(f?"bi-check-lg":"bi-x")})]},t))):Object(l.jsx)("p",{children:"Loading of options..."})}):Object(l.jsxs)("div",{className:"input-container",children:[Object(l.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),placeholder:"\xc9crivez la d\xe9finition"}),Object(l.jsx)("button",{onClick:()=>{if(!v.trim())return;w(!0);const e=s.words[j].definition,t=v.trim().toLowerCase()===e.toLowerCase();g(t);const c={...a},r=c[j];t&&(r.inputCorrect+=1,r.qcmCorrect>=2&&r.inputCorrect>=2&&(r.mastered=!0)),d(c),z(c),setTimeout((()=>{q(),N(""),g(null),w(!1)}),1e3)},children:Object(l.jsx)("i",{className:"bi bi-arrow-up-circle-fill"})}),C&&Object(l.jsx)("p",{className:f?"correct-text":"incorrect-text",children:f?"Correct !":`Faux, la bonne r\xe9ponse \xe9tait : ${s.words[j].definition}`})]})]}):Object(l.jsx)("p",{children:"Loading..."})};var x=function(){return Object(l.jsx)(a.a,{basename:"/turboQuizz",children:Object(l.jsxs)(o.d,{children:[Object(l.jsx)(o.b,{path:"/",element:Object(l.jsx)(o.a,{to:"/login"})}),Object(l.jsx)(o.b,{path:"/login",element:Object(l.jsx)(m,{})}),Object(l.jsx)(o.b,{path:"/user/:userId/home",element:Object(l.jsx)(d,{})}),Object(l.jsx)(o.b,{path:"/user/:userId/list/:id",element:Object(l.jsx)(u,{})}),Object(l.jsx)(o.b,{path:"/user/:userId/list/:id/cards",element:Object(l.jsx)(h,{})}),Object(l.jsx)(o.b,{path:"/user/:userId/list/:id/learn",element:Object(l.jsx)(O,{})})]})})};i.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.c119f4bc.chunk.js.map